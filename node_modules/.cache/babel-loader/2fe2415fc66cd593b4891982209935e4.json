{"ast":null,"code":"// frontend/src/store/session.js\nimport { csrfFetch } from './csrf';\nconst SET_USER = 'session/setUser';\nconst REMOVE_USER = 'session/removeUser';\n\nconst setUser = user => {\n  return {\n    type: SET_USER,\n    payload: user\n  };\n};\n\nconst removeUser = () => {\n  return {\n    type: REMOVE_USER\n  };\n};\n\nexport const login = user => async dispatch => {\n  const {\n    credential,\n    password\n  } = user;\n  const response = await csrfFetch('/api/session', {\n    method: 'POST',\n    body: JSON.stringify({\n      credential,\n      password\n    })\n  });\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n};\nconst initialState = {\n  user: null\n};\n\nconst sessionReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let newState;\n\n  switch (action.type) {\n    case SET_USER:\n      newState = Object.assign({}, state);\n      newState.user = action.payload;\n      return newState;\n\n    case REMOVE_USER:\n      newState = Object.assign({}, state);\n      newState.user = null;\n      return newState;\n\n    default:\n      return state;\n  }\n};\n\nexport const restoreUser = () => async dispatch => {\n  const response = await csrfFetch('/api/session');\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n};\nexport const signup = user => async dispatch => {\n  const {\n    username,\n    email,\n    password\n  } = user;\n  const response = await csrfFetch(\"/api/users\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      username,\n      email,\n      password\n    })\n  });\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n};\nexport const logout = () => async dispatch => {\n  const response = await csrfFetch('/api/session', {\n    method: 'DELETE'\n  });\n  dispatch(removeUser());\n  return response;\n};\nexport default sessionReducer;","map":{"version":3,"names":["csrfFetch","SET_USER","REMOVE_USER","setUser","user","type","payload","removeUser","login","dispatch","credential","password","response","method","body","JSON","stringify","data","json","initialState","sessionReducer","state","action","newState","Object","assign","restoreUser","signup","username","email","logout"],"sources":["/Users/aaron/1portfolio/port/portApp/frontend/src/store/session.js"],"sourcesContent":["// frontend/src/store/session.js\nimport { csrfFetch } from './csrf';\n\nconst SET_USER = 'session/setUser';\nconst REMOVE_USER = 'session/removeUser';\n\nconst setUser = (user) => {\n    return {\n        type: SET_USER,\n        payload: user,\n    };\n};\n\nconst removeUser = () => {\n    return {\n        type: REMOVE_USER,\n    };\n};\n\nexport const login = (user) => async (dispatch) => {\n    const { credential, password } = user;\n    const response = await csrfFetch('/api/session', {\n        method: 'POST',\n        body: JSON.stringify({\n            credential,\n            password,\n        }),\n    });\n    const data = await response.json();\n    dispatch(setUser(data.user));\n    return response;\n};\n\nconst initialState = { user: null };\n\nconst sessionReducer = (state = initialState, action) => {\n    let newState;\n    switch (action.type) {\n        case SET_USER:\n            newState = Object.assign({}, state);\n            newState.user = action.payload;\n            return newState;\n        case REMOVE_USER:\n            newState = Object.assign({}, state);\n            newState.user = null;\n            return newState;\n        default:\n            return state;\n    }\n};\n\nexport const restoreUser = () => async dispatch => {\n    const response = await csrfFetch('/api/session');\n    const data = await response.json();\n    dispatch(setUser(data.user));\n    return response;\n};\n\nexport const signup = (user) => async (dispatch) => {\n    const { username, email, password } = user;\n    const response = await csrfFetch(\"/api/users\", {\n        method: \"POST\",\n        body: JSON.stringify({\n            username,\n            email,\n            password,\n        }),\n    });\n    const data = await response.json();\n    dispatch(setUser(data.user));\n    return response;\n};\n\nexport const logout = () => async (dispatch) => {\n    const response = await csrfFetch('/api/session', {\n        method: 'DELETE',\n    });\n    dispatch(removeUser());\n    return response;\n};\n\nexport default sessionReducer;\n"],"mappings":"AAAA;AACA,SAASA,SAAT,QAA0B,QAA1B;AAEA,MAAMC,QAAQ,GAAG,iBAAjB;AACA,MAAMC,WAAW,GAAG,oBAApB;;AAEA,MAAMC,OAAO,GAAIC,IAAD,IAAU;EACtB,OAAO;IACHC,IAAI,EAAEJ,QADH;IAEHK,OAAO,EAAEF;EAFN,CAAP;AAIH,CALD;;AAOA,MAAMG,UAAU,GAAG,MAAM;EACrB,OAAO;IACHF,IAAI,EAAEH;EADH,CAAP;AAGH,CAJD;;AAMA,OAAO,MAAMM,KAAK,GAAIJ,IAAD,IAAU,MAAOK,QAAP,IAAoB;EAC/C,MAAM;IAAEC,UAAF;IAAcC;EAAd,IAA2BP,IAAjC;EACA,MAAMQ,QAAQ,GAAG,MAAMZ,SAAS,CAAC,cAAD,EAAiB;IAC7Ca,MAAM,EAAE,MADqC;IAE7CC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;MACjBN,UADiB;MAEjBC;IAFiB,CAAf;EAFuC,CAAjB,CAAhC;EAOA,MAAMM,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAT,EAAnB;EACAT,QAAQ,CAACN,OAAO,CAACc,IAAI,CAACb,IAAN,CAAR,CAAR;EACA,OAAOQ,QAAP;AACH,CAZM;AAcP,MAAMO,YAAY,GAAG;EAAEf,IAAI,EAAE;AAAR,CAArB;;AAEA,MAAMgB,cAAc,GAAG,YAAkC;EAAA,IAAjCC,KAAiC,uEAAzBF,YAAyB;EAAA,IAAXG,MAAW;EACrD,IAAIC,QAAJ;;EACA,QAAQD,MAAM,CAACjB,IAAf;IACI,KAAKJ,QAAL;MACIsB,QAAQ,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,KAAlB,CAAX;MACAE,QAAQ,CAACnB,IAAT,GAAgBkB,MAAM,CAAChB,OAAvB;MACA,OAAOiB,QAAP;;IACJ,KAAKrB,WAAL;MACIqB,QAAQ,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,KAAlB,CAAX;MACAE,QAAQ,CAACnB,IAAT,GAAgB,IAAhB;MACA,OAAOmB,QAAP;;IACJ;MACI,OAAOF,KAAP;EAVR;AAYH,CAdD;;AAgBA,OAAO,MAAMK,WAAW,GAAG,MAAM,MAAMjB,QAAN,IAAkB;EAC/C,MAAMG,QAAQ,GAAG,MAAMZ,SAAS,CAAC,cAAD,CAAhC;EACA,MAAMiB,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAT,EAAnB;EACAT,QAAQ,CAACN,OAAO,CAACc,IAAI,CAACb,IAAN,CAAR,CAAR;EACA,OAAOQ,QAAP;AACH,CALM;AAOP,OAAO,MAAMe,MAAM,GAAIvB,IAAD,IAAU,MAAOK,QAAP,IAAoB;EAChD,MAAM;IAAEmB,QAAF;IAAYC,KAAZ;IAAmBlB;EAAnB,IAAgCP,IAAtC;EACA,MAAMQ,QAAQ,GAAG,MAAMZ,SAAS,CAAC,YAAD,EAAe;IAC3Ca,MAAM,EAAE,MADmC;IAE3CC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;MACjBY,QADiB;MAEjBC,KAFiB;MAGjBlB;IAHiB,CAAf;EAFqC,CAAf,CAAhC;EAQA,MAAMM,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAT,EAAnB;EACAT,QAAQ,CAACN,OAAO,CAACc,IAAI,CAACb,IAAN,CAAR,CAAR;EACA,OAAOQ,QAAP;AACH,CAbM;AAeP,OAAO,MAAMkB,MAAM,GAAG,MAAM,MAAOrB,QAAP,IAAoB;EAC5C,MAAMG,QAAQ,GAAG,MAAMZ,SAAS,CAAC,cAAD,EAAiB;IAC7Ca,MAAM,EAAE;EADqC,CAAjB,CAAhC;EAGAJ,QAAQ,CAACF,UAAU,EAAX,CAAR;EACA,OAAOK,QAAP;AACH,CANM;AAQP,eAAeQ,cAAf"},"metadata":{},"sourceType":"module"}